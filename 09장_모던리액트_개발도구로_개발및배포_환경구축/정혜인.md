## Next.js로 리액트 개발 환경 구축하기

### create—next-app 없이 하나씩 구축하기

- 가장 먼저 할 일은 `package.json`을 만드는 것으로, `npm init`을 실행하면 package.json을 만드는 CLI를 실행할 수 있음

### tsconfig.json 작성하기

- 필요한 라이브러리를 모두 설치했으면 타입스크립트 코드를 작성하기 위한 준비를 해야함
- npm 설정을 package.json에서 하는 것처럼 타입스크립트 설정은 `tsconfig.json`에 기록함
- 사용된 옵션은 아래와 같음
  - compilerOptions: 타입스크립트를 자바스크립트로 컴파일할 때 사용하는 옵션
  - forceConsistentCasingInFileNames: 파일 이름의 대소문자를 구분하도록 강제
  - noEmit: 컴파일을 하지 않고, 타입 체크만 진행. Next.js는 swc가 타입스크립트 파일을 컴파일하므로 굳이 타입스크립트가 자바스크립트로 컴파일할 필요가 없기 때문에 옵션이 켜져 있으면 타입스크립트는 단순히 타입 검사만 하는 역할을 함
  - esModuleInterop: CommonJS 방식으로 보낸 모듈을 ES 모듈 방식의 import로 가져올 수 있게 해줌

### next.config.ts 작성하기

- reactStrictMode: 리액트의 엄격 모드를 활성화함
- poweredByHeader: 일반적으로 보안 취약점으로 취급되는 X-Powered-By 헤더를 제거함
- eslint.ignoreDuringBuilds: 빌드 시에 ESLint를 무시함. 일반적으로 Next.js 빌드 시에 ESLint도 같이 수행하는데, 여기서는 true로 설정해 빌드 시에 ESLint를 수행하지 않게 됨

### ESLint와 Prettier 설정하기

- 코드 스타일링 등 eslint-config-next가 해주지 않는 일반적인 ESLint 작업을 수행하기 위해 가장 설치 및 설정이 쉬운 `@titicaca/eslint-config-triple`을 설치해 사용함

### 애플리케이션 코드 작성

- Next.js 애플리케이션의 폴더 구조는 `src/pages`하단에 실제 페이지 라우팅과 관련된 파일을 기재해야 한다는 컨벤션만 지키면 됨

## 깃허브 100% 활용하기

### 깃허브 액션으로 CI 환경 구축하기

- CI는 코드의 변화를 모으고 관리하는 코드 중앙 저장소에서, 여러 기여자가 기여한 코드를 지속적으로 빌드하고 테스트해 코드의 정합성을 확인하는 과정을 의미함
- CI의 핵심은 저장소에서 코드의 변화가 있을 때마다 전체 소프트웨어의 정합성을 확인하기 위한 작업을 자동으로 실행해야 한다는 것으로, 자동으로 실행해야 하는 작업이란 테스트, 빌드, 정적 분석, 보안 취약점 분석 등이 있음
- 과거 이 CI 환경 구축을 위해 가장 자주 쓰인 솔루션은 `젠킨스(Jenkins)`임
- 젠킨스는 유지보수 측면에서 번거로운 측면이 많았기에 대안으로 떠오르고 있는 것이 바로 **깃허브 액션**임
- 깃허브 액션의 본래 목적은 깃허브 저장소를 기반으로 깃허브에서 발생하는 다양한 이벤트를 트리거 삼아 다양한 작업을 할 수 있게 도와주는 것으로, 이러한 작업에는 아래와 같은 것이 포함됨
  - 깃허브의 어떤 브랜치에 푸시가 발생하면 빌드를 수행함
  - 깃허브의 특정 브랜치가 메인 브랜치를 대상으로 풀 리퀘스트가 열리면 빌드, 테스트, 정적 분석을 수행함
- 즉, 깃허브를 둘러싼 다양한 이벤트를 기반으로 깃허브에서 제공하는 가상 환경에서 사용자가 원하는 작업을 수행할 수 있도록 도와주는 서비스임
- 이러한 특징을 활용하면 다른 CI/CD(Continuous Integration/Continue Delivery) 솔루션을 대체할 수 있다는 것이 널리 알려지게 되면서 깃허브 액션이 CI/CD 서비스로 각광받게 됨
- 깃허브 액션의 기본 개념은 아래와 같음
  - 러너(runner): 파일로 작성된 깃허브 액션이 실행되는 서비스를 의미함. 특별히 지정하지 않으면 공용 깃허브 액션 서버를 이용하며, 별도의 러너를 구축해 자체적으로 운영할 수도 있음
  - 액션(action): 러너에서 실행되는 하나의 작업 단위를 의미하며, yaml 파일로 작성된 내용을 하나의 액션으로 볼 수 있음
  - 이벤트(event): 깃허브 액션의 실행을 일으키는 이벤트를 의미함. 개발자의 필요에 따라 한 개 이상의 이벤트를 지정할 수 있으며 특정 브랜치를 지정하는 이벤트도 가능함
  - 잡(jobs): 하나의 러너에서 실행되는 여러 스텝의 모음을 의미함
  - 스텝(steps): 잡 내부에서 일어나는 하나하나의 작업을 의미함. 셀 명령어나 다른 액션을 실행할 수도 있으며, 이 작업은 병렬로 일어나지 않음
  - 요약하면 스텝들을 엮어서 잡을 만들고, 이러한 여러 개의 잡은 병렬로 실행되며, 이러한 잡을 하나 이상 모아둔 것을 액션이라고 함
