## 리액트 개발 도구란?

- `react-dev-tools`는 리액트로 개발된 애플리케이션의 디버깅을 돕기 위한 리액트 개발 도구

## 리액트 개발 도구 설치

- 크롬: https://chromewebstore.google.com/detail/react-developer-tools/fmkadmapgofadopljbjfkapdkoienihi?hl=en
- 파이어폭스: https://addons.mozilla.org/en-US/firefox/addon/react-devtools/
- 마이크로소프트 엣지: https://microsoftedge.microsoft.com/addons/detail/react-developer-tools/gpphkfbcpidddadnkolkpfckpihlkkil

## 리액트 개발 도구 활용하기

### 컴포넌트

- 현재 리액트 애플리케이션의 컴포넌트 트리 확인이 가능. 단순히 컴포넌트의 구조뿐만 아니라 **props**와 **내부 hooks** 등 다양한 정보 확인이 가능함
- **컴포넌트 트리**: Components의 왼쪽 영역은 해당 리액트 페이지의 컴포넌트 트리를 나타냄. 이름 그대로 트리 구조로 구성되어 있으며 리액트 애플리케이션 전체의 트리 구조를 한눈에 보여줌. 상단 입력란에서는 정규식 등을 활용해 검색할 수 있음
- 함수 선억식과 함수 표현식으로 생성한 컴포넌트는 모두 정상적으로 함수명을 표시함. 그러나 함수 선언식 또는 표현식으로 선언되지 않은 컴포넌트는 아래와 같은 문제를 확인할 수 있음
  - 익명함수를 default로 export한 AnonymousDefaultcomponent의 경우 AnonymousDefaultComponent는 코드 내부에서 사용되는 이름일 뿐, 실제로 default export로 내보낸 함수의 명칭은 추론할 수 없음. 따라서 `_default`로 표시됨
  - `memo`를 사용해 익명 함수로 만든 컴포넌트를 감싼 경우 함수명을 명확히 추론하지 못해서 `Anonymous`로 표시됨. 추가로 memo 라벨을 통해 memo로 감싸진 컴포넌트임을 알 수 있음
  - 고차 컴포넌트인 withSampleHOC으로 감싼 `HOCComponent`의 경우 두 가지 모두 `Anonymous`로 선언됨. 이 또한 고차 컴포넌트의 명칭을 제대로 추론하지 못하기 때문
- 컴포넌트를 기명 함수로 선언하는 것은 개발 도구에서 확인하는 데 많은 도움을 줌. 비단 컴포넌트뿐만 아니라 훅 등 다양한 곳에서도 동일하게 적용되므로 **함수를 기명으로 두는 것은 디버깅하는 데 많은 도움**이 됨
- 만약 함수를 기명 함수로 바꾸기 어려우면 함수에 `displayName` 속성 추가

### 프로파일러

- 컴포넌트 메뉴가 정적인 현재 리액트 컴포넌트 트리의 내용을 디버깅하기 위한 도구라면 프로파일러는 리액트가 렌더링하는 과정에서 발생하는 상황을 확인하기 위한 도구. <br/>즉, 리액트 애플리케이션이 렌더링되는 과정에서 어떤 컴포넌트가 렌더링됐는지, 또 몇 차례나 렌더링이 일어났으면 어떤 작업에서 오래 걸렸는지 등 컴포넌트 렌더링 과정에서 발생하는 일을 확인할 수 있음
- 이 메뉴는 렌더링 과정에 개입해 디버깅에 필요한 내용을 기록해야 하기 때문에 프로덕션 빌드로 실행되는 리액트 애플리케이션에서는 사용할 수 없음. 프로파일러 메뉴가 어떻게 작동하는지 확인하고 싶다면 개발 모드로 실행되는 리액트 애플리ㅓ케이션을 준비해야 함
- General 탭의 `Highligh updates when components render`는 컴포넌트가 렌더링될 때마다 해당 컴포넌트에 하이라이트를 표시하는데, 이 기능은 매우 유용한 기능이므로 꼭 켜두는 것이 좋음
- **Flamegraph**: 해당 탭에서는 렌더 커밋별로 어떠한 작업이 일어났는지를 나타냄
  - 너비가 넓을수록 해당 컴포넌트를 렌더링하는 데 오래 걸렸다는 것을 의미함. 당연하게도 렌더링이 가장 오래 걸리는 컴포넌트는 모든 컴포넌트를 렌더링해야 하는 **루트 컴포넌트**임
  - 컴포넌트의 구조상 이 그래프 영역도 컴포넌트 메뉴와 비슷하게, 그러나 다른 형태로 트리 구조의 리액트 컴포넌트 트리 구조를 확인할 수 있음
  - 마우스 커서를 가져다 대면 확인할 수 있는 렌더링 정보 이외에도 오른쪽에는 해당 커밋과 관련된 추가적인 정보를 확인할 수 있음
  - 이 메뉴는 비단 컴포넌트가 렌더링이 얼마나 걸렸는지 확인할 수 있을뿐더러 렌더링되지 않은 컴포넌트에 대한 정보도 확인할 수 있음
  - 렌더링되지 않은 컴포넌트는 회색으로 표시되며 ‘Did not render’라는 메시지가 표시되는데, 이를 활용하면 개발자가 의도한 대로 메모이제이션이 작동하고 있는지 혹은 특정 상태 변화에 따라서 렌더링이 의도한 대로 제한적으로 발생하고 있는지 확인하는 데 많은 도움을 얻을 수 있음. 컴포넌트 트리가 복잡하고 거대해 렌더링에 신경을 써야 하는 상황이라면 반드시 이 메뉴를 활용해 렌더링 상황을 확인하자
  - Flamegraph의 오른쪽에 있는 화살표를 누르거나 세로 막대 그래프 클릭시 각 렌더 커밋별로 리액트 트리에서 발생한 렌더링 정보를 확인할 수 있음
- **Ranked**: 해당 커밋에서 렌더링하는 데 오랜 시간이 걸린 컴포넌트를 순서대로 나열한 그래프
  - Flamegraph와의 차이점은 모든 컴포넌트를 보여주는 것이 아니라 단순히 렌더링이 발생한 컴포넌트만 보여줌
  - 렌더링이 발생한 컴포넌트에 대한 정보만 파악하고 싶다면 Ranked 메뉴 활용시 렌더링되지 않은 정보는 필터링해서 보여주기 때문에 좀 더 간결하게 원하는 정보 파악이 가능함
- **Timeline**: 시간이 지남에 따라 컴포넌트에서 어떤 일이 일어났는지 확인 가능
  - 리액트 18 이상의 환경에서만 확인이 가능
  - input에 글자를 입력하면 state의 값이 업데이트되고, 이 값이 동기로 업데이트됐는지 또 언제 업데이트가 이뤄졌는지 등을 확인할 수 있음
  - 시간의 흐름에 따라 리액트가 작동하는 내용을 추적하는 데 유용함. 시간 단위로 프로파일링 기간 동안 무슨 일이 있었는지, 무엇이 렌더링됐고, 또 어느 시점에 렌더링됐는지, 리액트의 유휴 시간은 어느 정도였는지 등을 자세히 확인할 수 있음

## 정리

- 리액트 개발 도구를 활용하면 정적으로 생성된 컴포넌트 트리를 보는 것에서부터 프로파일링을 통해 리액트 애플리케이션이 시간이 지남에 따라 어떤 식으로 작동하는지, 불필요한 리렌더링이 일어나고 있는지 등을 확인할 수 있음
- 리액트 컴포넌트 구조가 복잡해지기 전에 틈틈이 리액트 개발 도구를 활용해 디버깅을 수행해 보자
- 애플리케이션을 개발하면서 시간이 날 때마다 틈틈이 리액트 개발 도구로 컴포넌트 트리와 프로파일링을 실행해 원하는 대로 렌더링되고 있는지, 메모이제이션을 활용한 최적화는 잘 되고 있는지 확인해 보자. 이론적으로 이해하고 있는 사실만 믿고, 실제로 의도대로 작동하고 있는지 확인하지 않고 개발을 이어가다 보면 자칫 실수가 나올 수 있고 이러한 실수는 실수의 크기와 관계없이 전체 애플리케이션에 커다란 악영향을 미칠 수도 있음
